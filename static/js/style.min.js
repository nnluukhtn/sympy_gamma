

/*** cnvyr.min.js ***/
(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"}function readCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function getURLParameter(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}var __extend=function(b,d){for(var a in b){if(Object.hasOwnProperty.call(b,a)){d[a]=b[a]}}function c(){this.constructor=d}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d};function gammaToString(a){if(typeof a==="undefined"){return"undefined"}else{if($.isArray(a)){return"["+$.map(a,gammaToString).join(",")+"]"}}return a.toString()}var Card=(function(){function a(e,b,d,c){this.card_name=e;this._fullscreen=false;if(typeof this.card_name==="undefined"){return}this.variable=b;this.expr=d;this.parameters=c;this.parameterValues={};this._evaluateCallbacks=[];this.onEvaluate($.proxy(this.initApproximation,this))}a.prototype.parameter=function(b,c){if(c!=null){this.parameterValues[b]=c}return this.parameterValues[b]};a.prototype.evaluate=function(g,e){if(g==null){g=$.proxy(this.evaluateFinished,this)}if(e==null){e=$.proxy(this.evaluateError,this)}if(typeof this.card_name!=="undefined"){var d="/card/"+this.card_name;var f={variable:this.variable,expression:this.expr};$.extend(f,this.parameterValues);var c=$.getJSON(d,f,g);c.error(e);return c}var b=new $.Deferred();b.reject();return b};a.prototype.evaluateFinished=function(c){if(c){if(typeof c.output!=="undefined"){this.result.html(c.output);MathJax.Hub.Queue(["Typeset",MathJax.Hub])}else{var b=$("<div/>").addClass("cell_output_plain").html(c.error);this.output.html(b);this.element.addClass("result_card_error");this.removeOptionsSection()}this.output.children(".loader").fadeOut(500)}$.each(this._evaluateCallbacks,$.proxy(function(d,e){e(this,c)},this))};a.prototype.onEvaluate=function(b){this._evaluateCallbacks.push(b)};a.prototype.evaluateError=function(){this.output.html($("<div/>").html("Error occurred"));this.removeOptionsSection();this.element.addClass("result_card_error");this.output.children(".loader").fadeOut(500)};a.prototype.addOptionsSection=function(){if(typeof this._optionsSection==="undefined"){this._optionsSection=$("<div/>").addClass("card_options");this.element.append(this._optionsSection)}};a.prototype.removeOptionsSection=function(){this.element.find(".card_options").remove()};a.prototype.addToOptionsSection=function(b){this._optionsSection.append(b)};a.prototype.addOptionsButton=function(c){var b=$("<button/>").addClass("card_options_toggle").html(c);this.addToOptionsSection(b);return b};a.prototype.initApproximation=function(){this.element.find('script[data-numeric="true"]').each(function(){$(this).html($(this).html()+"\\approx"+$(this).data("approximation"))});MathJax.Hub.Queue(["Typeset",MathJax.Hub]);if(this.element.find('script[data-numeric="true"]').length){if(this.parameters&&this.parameters.indexOf("digits")!==-1){return}this.addOptionsSection();var b=this.element.find('script[data-numeric="true"]');var c=this.addOptionsButton("More Digits");var d=new a("approximator","x",null,["digits"]);d.parameter("digits",15);c.click($.proxy(function(){var e=10;if(d.parameter("digits")<=15){e=35}d.parameter("digits",d.parameter("digits")+e);b.each(function(){d.expr=$(this).data("output-repr");var f=$(this);d.evaluate(function(h){if(h.output){var g=MathJax.Hub.getJaxFor(f.get(0));MathJax.Hub.Queue(["Text",g,$(h.output).html()])}})})},this))}};a.prototype.initSpecificFunctionality=function(){if(typeof this.card_name!=="undefined"){if(this.parameters.indexOf("digits")!==-1){this.addOptionsSection();var b=this.addOptionsButton("More Digits");this.parameter("digits",15);b.click($.proxy(function(){var f=10;if(this.parameter("digits")<=15){f=35}this.parameter("digits",this.parameter("digits")+f);this.evaluate()},this))}if(this.card_name==="integral_alternate"||this.card_name==="diff"){if(this.card_name==="integral_alternate"){if($("#intsteps").length){return}}if(this.card_name==="diff"){if($("#diffsteps").length){return}}this.addOptionsSection();var c=this.addOptionsButton("See Steps");
if(this.card_name==="integral_alternate"){var d="Integral steps:";var e="intsteps"}else{if(this.card_name==="diff"){var d="Derivative steps:";var e="diffsteps"}}c.click($.proxy(function(){new_card=this.cloneEl();new_card.find(".card_title").html(d);new_card.find(".cell_output").data("card-name",e);new_card.find(".cell_input").remove();new_card.hide();this.element.after(new_card);a.loadNewCard(new_card);c.remove()},this))}else{if(this.card_name==="intsteps"||this.card_name==="diffsteps"){this.element.hide();this.onEvaluate(function(g,i){if(!g.element.hasClass("result_card_error")){g.element.delay(1000).slideDown(300);g.element.find(".collapsible > h2").click(function(){$(this).next().slideToggle();$(this).toggleClass("shown")});var f=g.element.find(".steps").parent();var h=$("<button>Fullscreen</button>");h.click($.proxy(function(){this.toggleFullscreen()},g));f.prepend(h)}})}}}else{this.element.addClass("no_actions")}};a.prototype.toggleFullscreen=function(){if(!this._fullscreen){var b=30;if($(window).width()<1280){b=0}$('<div id="fade"/>').appendTo("body").css({zIndex:500,background:"#DDD",opacity:0,position:"fixed",left:0,top:0,right:0,bottom:0}).animate({opacity:0.8});this.element.after($('<div id="fullscreen-placeholder"/>'));this.element.appendTo("body").css({margin:b}).addClass("fullscreen");this._fullscreen=true;var c=$.proxy(function(d){if(d.keyCode==27){this.toggleFullscreen();$("body").off("keyup",c)}},this);$("body").on("keyup",c)}else{$("#fade").fadeOut(function(){$(this).remove()});this.element.attr("style","").removeClass("fullscreen");$("#fullscreen-placeholder").replaceWith(this.element);this._fullscreen=false}};a.prototype.setElement=function(b){this.element=b;this.output=b.find(".cell_output");this.result=$("<div/>");this.output.append(this.result);if(typeof this.card_name!=="undefined"){this.element.append($("<ul/>").append([$("<li>Simplify</li>")]).addClass("card_actions"))}else{this.initApproximation()}};a.prototype.clone=function(){var b=$.extend(true,{},this);b.setElement(this.cloneEl());return b};a.prototype.cloneEl=function(){var b=this.element.clone();b.find(".cell_output").html("");b.find(".card_options").remove();b.find(".card_actions").remove();return b};a.fromCardEl=function(e){var b=e.find(".cell_output");var h=b.data("card-name");var d=encodeURIComponent(b.data("variable"));var g=encodeURIComponent(gammaToString(b.data("expr")));var f=b.data("parameters");var c=new a(h,d,g,f);c.setElement(e);e.data("card",c);return c};a.loadNewCard=function(d){var c=a.fromCardEl(d);var b=$("<div/>").addClass("loader");d.before(b);c.evaluate().always(function(){d.slideDown(500);b.slideUp(200)});return c};a.loadFullCard=function(g,c,f,e){var b="/card_full/"+g;var d={variable:c,expression:f};$.extend(d,e);return $.get(b,d)};return a})();var __extend=function(b,d){for(var a in b){if(Object.hasOwnProperty.call(b,a)){d[a]=b[a]}}function c(){this.constructor=d}c.prototype=b.prototype;d.prototype=new c();d.__super__=b.prototype;return d};var PlotBackend=(function(){function a(c,b){this.plot=c}return a})();var D3Backend=(function(b){__extend(b,a);function a(e,c){a.__super__.constructor.call(this,e,c);this.svg=d3.select(c).append("svg").attr({width:e.width(),height:e.height(),version:"1.1",xmlns:"http://www.w3.org/2000/svg"});var d=(("onwheel" in document.createElement("div"))?"wheel":(document.onmousewheel!==undefined)?"mousewheel":"DOMMouseScroll");this.svg.on(d,function(){d3.event.stopImmediatePropagation()});this.zoom=d3.behavior.zoom().size([this.plot.width(),this.plot.height()]).x(this.plot.scales.x).y(this.plot.scales.y);this.zoom.on("zoom",$.proxy(this._handleZoom,this));this.svg.call(this.zoom);this.graphs=[]}a.prototype._handleZoom=function(){this.updateAxes();this.updateGrid();for(var c=0;c<this.graphs.length;c++){this.graphs[c].update()}if(d3.event!==null){this.plot.retrieveData({scale:d3.event.scale})}};a.prototype.showAxes=function(){this.svg.select(".axes").remove();this.axes=this.svg.append("g").attr("class","axes");this.xAxis=d3.svg.axis().scale(this.plot.scales.x).orient("bottom").ticks(10).tickSize(2);this.yAxis=d3.svg.axis().scale(this.plot.scales.y).orient("right").ticks(10).tickSize(2);this.axes.append("g").attr("class","x-axis");this.axes.append("g").attr("class","y-axis");this.updateAxes()};a.prototype.hideAxes=function(){this.svg.select(".axes").remove()};a.prototype.updateAxes=function(){this.axes.select(".x-axis").call(this.xAxis);this.axes.select(".y-axis").call(this.yAxis);var c=this.plot.scales.y(0)-0.5;this.xAxis.orient("bottom");if(c>this.plot.height()){c=this.plot.height();this.xAxis.orient("top")}else{if(c<0){c=0}}var d=this.plot.scales.x(0)-0.5;this.yAxis.orient("right");if(d>this.plot.width()){d=this.plot.width();this.yAxis.orient("left")}else{if(d<0){d=0}}this.svg.select(".x-axis").attr("transform","translate(0,"+c+")");this.svg.select(".y-axis").attr("transform","translate("+d+", 0)")};a.prototype.showGrid=function(){this.svg.select(".grid").remove();this.grid=this.svg.append("g").attr("class","grid");
this.xGrid=this.grid.append("g").attr("class","x-grid");this.yGrid=this.grid.append("g").attr("class","y-grid");this.updateGrid()};a.prototype.hideGrid=function(){this.svg.select(".grid").remove()};a.prototype.updateGrid=function(){var c=this.xGrid.selectAll("line").data(this.plot.scales.x.ticks(10));c.enter().append("line");c.exit().remove();c.attr({x1:this.plot.scales.x,y1:this.plot.scales.y(this.plot.scales.y.domain()[1]),x2:this.plot.scales.x,y2:this.plot.scales.y(this.plot.scales.y.domain()[0]),fill:"none",stroke:d3.rgb(125,125,125)}).attr("stroke-dasharray","1, 3");var d=this.yGrid.selectAll("line").data(this.plot.scales.y.ticks(10));d.enter().append("line");d.exit().remove();d.attr({x1:this.plot.scales.x(this.plot.scales.x.domain()[0]),y1:this.plot.scales.y,x2:this.plot.scales.x(this.plot.scales.x.domain()[1]),y2:this.plot.scales.y,fill:"none",stroke:d3.rgb(125,125,125)}).attr("stroke-dasharray","1, 3")};a.prototype.showCrosshair=function(){this.crosshair=this.svg.append("g").attr("class","crosshair");this.crosshair.append("line").attr({"class":"x",x1:0,y1:0,fill:"none",stroke:d3.rgb(25,25,25)});this.crosshair.append("line").attr({"class":"y",x1:0,y1:0,fill:"none",stroke:d3.rgb(25,25,25)});this.updateCrosshair({x:0,y:0})};a.prototype.hideCrosshair=function(){this.svg.select(".crosshair").remove()};a.prototype.updateCrosshair=function(c){this.crosshair.select(".x").attr({y1:c.y,x2:this.plot.scales.x(this.plot.scales.x.domain()[1]),y2:c.y});this.crosshair.select(".y").attr({x1:c.x,x2:c.x,y2:this.plot.scales.y(this.plot.scales.y.domain()[0])})};a.prototype.makeGraph=function(k,h){var j=this.svg.append("g").attr("class","points");var l=this.svg.append("g").attr("class","path").append("svg:path");var m=d3.svg.line().x(this.plot.scales.x);var f=$.proxy(function(g){var n=j.selectAll("circle").data(g.points.x);n.exit().remove("circle");n.enter().append("circle");j.selectAll("circle").attr({cx:this.plot.scales.x,cy:$.proxy(function(p,o){return this.plot.scales.y(g.points.y[o])},this),r:2,fill:h})},this);var e=$.proxy(function(g){m.x(this.plot.scales.x).y($.proxy(function(o,n){return this.plot.scales.y(g.points.y[n])},this));l.attr({d:m(g.points.x),fill:"none",stroke:h,opacity:0.8}).attr("stroke-width",1.5)},this);var d=true;var c=false;var i={update:$.proxy(function(g){if(typeof g!=="undefined"){k=g}if(this.plot.option("points")){f(k);j.attr("display","block")}else{j.attr("display","none")}if(this.plot.option("path")){e(k);l.attr("display","block")}else{l.attr("display","none")}},this),toggle:function(){if(d){l.attr("display","none");j.attr("display","none")}else{this.update()}d=!d},highlight:function(){if(!c){l.attr("stroke-width",3);j.selectAll("circle").attr("r",3)}else{l.attr("stroke-width",1.5);j.selectAll("circle").attr("r",2)}c=!c}};this.graphs.push(i);return i};a.prototype.resize=function(c){this.svg.attr({width:this.plot.width(),height:this.plot.height()});if(typeof c!=="undefined"&&c.updateZoom){this.zoom.size([this.plot.width(),this.plot.height()]).x(this.plot.scales.x).y(this.plot.scales.y)}};a.prototype.reset=function(){d3.transition().duration(300).tween("zoom",$.proxy(function(){var d=this.plot.scales.x;var f=this.plot.scales.y;var e=d3.interpolate(d.domain(),[-10,10]);var c=d3.interpolate(f.domain(),this.plot.calculateYRange());return $.proxy(function(g){this.zoom.x(d.domain(e(g))).y(f.domain(c(g)));this._handleZoom()},this)},this))};a.prototype.asDataURI=function(){this.hideCrosshair();var c=new XMLSerializer();var d=window.btoa(c.serializeToString(this.svg[0][0]));this.showCrosshair();return"data:image/svg+xml;base64,\n"+d};return a})(PlotBackend);var Plot2D=(function(){function a(d,b,g,c){this.card=d;this._container=$(b);this._graphs=c;this.graphs=[];this.options={grid:true,axes:true,points:false,path:true};for(var f in this.options){if(!this.options.hasOwnProperty(f)){continue}var e=readCookie(f);if(e==="true"){this.options[f]=true}else{if(e==="false"){this.options[f]=false}}}this._scale=1;this._requestPending=false;this._generateScales();this._backend=new g(this,b);this._calculateExtent()}a.prototype._generateScales=function(){if(typeof this.scales==="undefined"){this.scales={x:d3.scale.linear(),y:d3.scale.linear()}}this.scales.x.domain([-10,10]).range([10,this.width()-10]);this.scales.y.domain(this.calculateYRange()).range([this.height()-10,10])};a.prototype._calculateExtent=function(){this._extent={min:d3.min(this._graphs.map(function(b){return d3.min(b.points.x)})),max:d3.max(this._graphs.map(function(b){return d3.max(b.points.x)}))}};a.prototype.calculateYRange=function(){if(typeof this._originalExtent!=="undefined"){return this._originalExtent}var g=[];var f=[];var e=0;var b=0;this._graphs.forEach(function(h){h.points.y.forEach(function(i){if(i<b){b=i}else{if(i>e){e=i}}if(i<=0){f.push(i)}else{if(i>0){g.push(i)}}})});var d=Math.abs(d3.mean(g));var c=Math.abs(d3.mean(f));if(Math.abs(e)>=10*d){e=d}if(Math.abs(b)>=10*c){b=-c}this._originalExtent=[b,e];return this._originalExtent};a.prototype.width=function(){return Math.round(this._container.width())
};a.prototype.height=function(){return Math.round(this._container.height())};a.prototype.show=function(){this._backend.showAxes(this.scales);this._backend.showGrid(this.scales);var b=d3.scale.category10();for(var c=0;c<this._graphs.length;c++){var d=this._backend.makeGraph(this._graphs[c],b(c));d.update();this.graphs.push(d)}this._backend.showCrosshair()};a.prototype.update=function(){if(this.option("axes")){this._backend.showAxes(this.scales)}else{this._backend.hideAxes()}if(this.option("grid")){this._backend.showGrid(this.scales)}else{this._backend.hideGrid()}for(var b=0;b<this.graphs.length;b++){var c=this.graphs[b];c.update()}};a.prototype.retrieveData=function(b){if(b.scale!=this._scale){this._scale=b.scale;this.fetch(this.scales.x.domain()[0],this.scales.x.domain()[1],"replace")}else{var c=(this._extent.max-this._extent.min)/2;if(this.scales.x.domain()[0]<this._extent.min){this.fetch(Math.round(this.scales.x.domain()[0]-c),this._extent.min,"prepend")}if(this.scales.x.domain()[1]>this._extent.max){this.fetch(this._extent.max,Math.round(this.scales.x.domain()[1]+c),"append")}}};a.prototype.fetch=function(b,d,c){if(!this._requestPending){this.card.parameter("xmin",b);this.card.parameter("xmax",d);this._requestPending=true;this.card.evaluate($.proxy(function(g){if(typeof g.output=="undefined"){return}var g=JSON.parse($(g.output).find(".graphs").text());if(c==="replace"){this._graphs=g}else{if(c==="prepend"){for(var e=0;e<this.graphs.length;e++){var f=this._graphs[e];g[e].points.x.pop();g[e].points.y.pop();f.points.x=g[e].points.x.concat(f.points.x);f.points.y=g[e].points.y.concat(f.points.y)}}else{if(c==="append"){for(var e=0;e<this.graphs.length;e++){var f=this._graphs[e];g[e].points.x.shift();g[e].points.y.shift();f.points.x=f.points.x.concat(g[e].points.x);f.points.y=f.points.y.concat(g[e].points.y)}}}}for(var e=0;e<this.graphs.length;e++){this.graphs[e].update(this._graphs[e])}this._calculateExtent()},this),function(){}).always($.proxy(function(){this._requestPending=false},this))}else{}};a.prototype.toggle=function(b){this.graphs[b].toggle()};a.prototype.highlight=function(b){this.graphs[b].highlight()};a.prototype.resize=function(b){this.scales.x.range([10,this.width()-10]);this.scales.y.range([this.height()-10,10]);this._backend.resize(b);this.update()};a.prototype.reset=function(){this._backend.reset();setTimeout($.proxy(function(){this.retrieveData({scale:1})},this),300)};a.prototype.option=function(b,c){if(typeof c==="undefined"){return this.options[b]}this.options[b]=c;createCookie(b,c,365)};a.prototype.asDataURI=function(){return this._backend.asDataURI()};return a})();function setupPlots(){$(".plot").each(function(){var g=$(this).data("variable");var b="y";if(g=="y"){b="x"}var e=$(this).parents(".result_card").data("card");var j=JSON.parse($(this).find(".graphs").text());var k=new Plot2D(e,$(this)[0],D3Backend,j);k.show();var a=d3.scale.category10();e.element.addClass("plot-card");e.element.find(".cell_input span").each(function(p){var q=$(this).css("color",a(p)).attr("title","Click to toggle visibility").hover(function(){k.highlight(p)}).click(function(){k.toggle(p);q.toggleClass("hidden")})});var n=false;var c=$(this);c.find("svg").mousemove(function(p){k._backend.updateCrosshair({x:p.offsetX,y:p.offsetY})});var d=c.width();var i=c.height();e.addOptionsSection();var m=$('<button><i class="icon-angle-down"></i> More...</button>').addClass("card_options_toggle").addClass("card_options_more");var h=$("<div/>");var o=$.map(["grid","axes","points","path"],function(p){var p=p;return $("<div/>").append([$('<input type="checkbox" id="plot-'+p+'" />').click(function(q){k.option(p,$(q.target).prop("checked"));k.update()}).prop("checked",k.option(p)),$('<label for="plot-'+p+'">Show '+p+"</label>")])});h.append([$("<div/>").append([$("<h2>Export</h2>"),$('<a href-lang="image/svg+xml">SVG</a>').click(function(){$(this).attr("href",k.asDataURI())}).attr("href",k.asDataURI())]),$("<div/>").append($("<h2>Plot Options</h2>")).append(o)]);h.hide();m.click(function(){h.slideToggle();m.toggleClass("open")});var o=c.parents(".result_card").find(".card_options");var f=function(p){var q=(typeof p.reset==="undefined")?false:p.reset;if(q){k.reset()}c.animate({width:p.width,height:p.height},{duration:300,progress:function(){k.resize()},complete:function(){if(q){k.reset()}k.resize({updateZoom:true})}})};o.append([$("<p>Drag to pan, (shift-)double-click to zoom, drag corner to resize</p>").addClass("help"),$("<button>Reset</button>").addClass("card_options_toggle").click(function(){k.reset();f({width:d,height:i,reset:true})}),$("<button>Square Viewport</button>").addClass("card_options_toggle").click(function(){var p=d3.max([c.width(),c.height()]);f({width:p,height:p})}),$("<button>Fullscreen</button>").addClass("card_options_toggle").click(function(){e.toggleFullscreen()}),m,h]);if(!window.matchMedia("screen and (max-device-width: 1280px)").matches){c.mousemove(function(s){var q=s.offsetX;if(typeof s.offsetX=="undefined"){q=s.pageX-$(s.target).offset().left
}var t=s.offsetY;if(typeof s.offsetX=="undefined"){t=s.pageY-$(s.target).offset().top}var r=c.width();var p=c.height();if((r-q<10)&&(p-t<10)){c.css("cursor","se-resize")}else{c.css("cursor","default")}});var l=new MutationObserver(function(q){if(q[0].attributeName==="style"){var r=c.width(),p=c.height();k.width(r);k.height(p);k.resize()}});l.observe(c.get(0),{attributes:true})}})}var FactorDiagram=(function(){function a(c,d){this._container=c;this._primes=d;this._svg=c.append("svg");this._defs=this._svg.append("svg:defs");this._defs.append("circle").attr("id","c").attr("r",2)}var b=function(c,d){return"translate("+c+","+d+")"};a.prototype._dimensions=function(e){var c=this._svg.append("use").attr("xlink:href",e);var d=c[0][0].getBBox();c.remove();return d};a.prototype.primeLayout=function(d,c,l){var q=this._dimensions(c);var r=q.width;var k=q.height;if(d==1){l.append("svg:g").append("circle").attr("r",2)}else{if(d==2){if(r>k){l.append("svg:g").append("svg:use").attr("xlink:href",c).attr("transform",b(0,-k/2));l.append("svg:g").attr("transform",b(0,k)).append("svg:use").attr("xlink:href",c)}else{l.append("svg:g").append("svg:use").attr("xlink:href",c).attr("transform",b(-r/2,0));l.append("svg:g").attr("transform",b(r,0)).append("svg:use").attr("xlink:href",c)}}else{for(var j=0;j<d;j++){var e=d3.max([r,k]);e=e*0.75/Math.sin((2*Math.PI)/(2*d));var f=j*(2*Math.PI/d);f-=Math.PI/2;var p=e*Math.cos(f);var o=e*Math.sin(f);l.append("svg:g").append("svg:use").attr("xlink:href",c).attr("transform",b(p,o))}}}};a.prototype.draw=function(){var f=function(l,d){if(l.length===0){return"#c"}else{var k=l[0];var i=l.slice(1);var j=this._defs.append("svg:g").attr("id","g"+d);var h=f.call(this,i,d+1);this.primeLayout(k,h,j,2,2);return"#"+j.attr("id")}};var c=f.call(this,this._primes,0);var e=this._svg.append("svg:use").attr("xlink:href",c).attr("id","diagram");var g=this._dimensions("#diagram");e.attr("transform",b(-g.x,-g.y));this._svg.attr("width",g.width);this._svg.attr("height",g.height)};return a})();function setupFactorization(){$("div.factorization-diagram").each(function(){var b=$(this).data("primes");var a=new FactorDiagram(d3.select($(this).children("div")[0]),b);a.draw()})}function setupDocumentation(){return;$(".document").each(function(){var a=$(this);a.find("pre").each(function(){var b=$('<button class="sympy-live-eval-button">Run code block in SymPy Live</button>');b.click(function(){console.log($(this).next().html())});$(this).before(b)})})}function setupExamples(){var a=0;$(".example-group div.contents").each(function(){var c=$(this);var e=$(this).siblings("h3");var d=readCookie(e.html());var b=readCookie("visitedBefore");if(!b){createCookie("visitedBefore",true,365)}if(!d||d==="false"){if(!b){c.delay(500+a).slideUp(500);a+=100}else{c.hide()}}else{e.addClass("shown")}});$(".example-group").click(function(c){var d=$(c.target);var b=d.siblings("div.contents");b.stop(false,true).slideToggle(500,function(){createCookie(d.html(),b.is(":visible"),365)});d.toggleClass("shown");d.siblings("i").toggleClass("shown");d.siblings("h3").toggleClass("shown")})}function setupSavedQueries(){$("div.col.recent a.remove").click(function(b){var a=$(b.target);b.preventDefault();a.parent().slideUp(300);$.get(a.attr("href"))});$("#clear-all-recent").click(function(){$("div.col.recent a.remove").click()})}function setupMobileKeyboard(){var a=$('<div id="mobile-keyboard"/>');a.append([$('<button data-key="+">+</button>'),$('<button data-key="-">-</button>'),$('<button data-key="*">*</button>'),$('<button data-key="/">/</button>'),$('<button data-key="()">()</button>'),$('<button data-offset="-1">&lt;</button>'),$('<button data-offset="1">&gt;</button>')]);var b=$(".input h1").height();$(".input").prepend(a);$("form input[type=text]").focus(function(){a.find("button").height(b);a.slideDown();$(".input h1").slideUp()});$("form input[type=text]").blur(function(){setTimeout(function(){if(!(document.activeElement.tagName.toLowerCase()=="input"&&document.activeElement.getAttribute("type")=="text")){a.slideUp();$(".input h1").slideDown()}},100)});$("#mobile-keyboard button").click(function(d){$("#mobile-keyboard").stop().show().height(b);$(".input h1").stop().hide();var c=$(".input input[type=text]")[0];var h=c.selectionStart;if($(this).data("key")){var g=c.value;c.value=(g.substring(0,h)+$(this).data("key")+g.substring(h));c.setSelectionRange(h+1,h+1)}else{if($(this).data("offset")){var f=parseInt($(this).data("offset"),10);c.setSelectionRange(h+f,h+f)}}})}function evaluateCards(){var a=new $.Deferred();var b=[];$(".result_card").each(function(){var d=Card.fromCardEl($(this));d.initSpecificFunctionality();var c=d.evaluate();if(!(c.state()=="rejected")){b.push(c)}});$.when.apply($,b).then(function(){a.resolve()});return a}function setupDidYouMean(){$(".did_you_mean var").each(function(){$(this).wrap($("<a />").attr("href","/input/?i="+$(this).text()))})}function setupVariableChooser(){var b="variable-"+$(".result_variables .active").html();var a=b;
$(".result_card").slice(1).addClass(b);$(".result_variables button").click(function(){var d=$(this);if(!d.is(".active")){var c=d.html();$(".result_variables").addClass("active");var e=[];if($(".variable-"+c).length){$(".result_card."+a).hide();$(".result_card.variable-"+c).show()}else{$(".result_card."+a).each(function(){var f=$(this).data("card");if(f.variable){var g=$("<div/>").addClass("result_card").append($("<div/>").addClass("loader"));f.element.after(g);e.push(Card.loadFullCard(f.card_name,c,f.expr,{}).done(function(h){var i=$(h);i.addClass("variable-"+c).find(".loader").remove();g.slideUp(300,function(){g.replaceWith(i);i.hide().slideDown();var j=Card.fromCardEl(i);j.initSpecificFunctionality();j.evaluateFinished();MathJax.Hub.Queue(["Typeset",MathJax.Hub])})}))}f.element.fadeOut()})}$.when.apply($,e).then(function(){a="variable-"+c;$(".result_variables button").removeClass("active");d.addClass("active")})}})}$(document).ready(function(){evaluateCards().done(function(){setupPlots();setupExamples();setupSavedQueries();setupFactorization();setupDidYouMean();setupVariableChooser()});if(screen.width<=1024){setupMobileKeyboard()}});